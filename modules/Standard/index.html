<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Mobile web solutions, based on project Mars.">
  <meta name="author" content="Alloyteam">
  
  <title>移动Web开发规范 | Spirit - 腾讯移动Web整体解决方案 | AlloyTeam</title>

  <!-- Bootstrap core CSS -->
  <link href="/Spirit/bootstrap3/css/bootstrap.min.css" rel="stylesheet">

  <!-- Just for debugging purposes. Don't actually copy this line! -->
  <!--[if lt IE 9]><script src="../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
  <![endif]-->
  <link href="/Spirit/css/common.css" rel="stylesheet">
</head>
<body data-spy="scroll" data-target="#sidebar" data-offset="70">
  <header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
    <div class="container">
        <div class="navbar-header">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/Spirit/" class="navbar-brand">Spirit</a>
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
          <ul class="nav navbar-nav">
            <li><a href="/Spirit/modules/Standard/index.html">移动Web开发规范</a></li>
            <li class="dropdown">
              <a id="drop" role="button" class="dropdown-toggle" data-toggle="dropdown">JM<b class="caret"></b></a>
              <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="/Spirit/modules/JM/index.html">组件</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://github.com/AlloyTeam/JM/archive/master.zip">下载</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="https://github.com/AlloyTeam/JM">View on Github</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a id="drop" role="button" class="dropdown-toggle" data-toggle="dropdown">JMUI<b class="caret"></b></a>
              <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="/Spirit/modules/JMUI/index.html">简介</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="/Spirit/modules/JMUI/demo.html">组件</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://github.com/AlloyTeam/JMUI/archive/master.zip">下载</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="https://github.com/AlloyTeam/JMUI">View on Github</a></li>
              </ul>
            </li>
            <li><a href="/Spirit/modules/Mobug/index.html">Mobug</a></li>
            <li><a href="/Spirit/modules/Mars/index.html">Mars</a></li>
            <li>
              <a href="/Spirit/mobile_industry_report_2013.html">2013移动互联网行业报告 <sup><span class="label label-success label-lg">new</span></sup></a>
            </li>
          </ul>

          <ul class="nav navbar-nav navbar-right">
              <li><a data-toggle="modal" data-target="#myModal" href="javascript:;">关于Spirit</a></li>
              <li><a target="_blank" href="http://www.alloyteam.com/about/">关于我们</a></li>
          </ul>
        </nav>
    </div>
</header>

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="/Spirit/js/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/Spirit/bootstrap3/js/bootstrap.min.js"></script>
<script src="/Spirit/js/common.js"></script>

  <link rel="stylesheet" href="/Spirit/css/prism.css" />
<style>
    section > ul li {
        margin-bottom: 5px;
    }
    .pun {
        color: #660;
    }
    .typ {
        color: #606;
    }
</style>

<section class="container row">
    <div class="col-md-3">
        <div id="sidebar" class="my_sidebar">
            <ul class="nav">
                <li class="sidebar_head_li"><a href="#overview">规范概述</a></li>
                <li class="sidebar_head_li"><a href="#font">字体设置</a></li>
                <li class="sidebar_head_li"><a href="#base_ui">基础交互</a></li>
                <li class="sidebar_head_li"><a href="#performance">移动性能</a></li>            
            </ul>
        </div>
    </div>

    <div class="page_content col-md-9" role="main">
        <section id="overview">
            <h2>移动开发规范概述</h2>
            <p>以下规范建议，均是<code>Alloyteam</code>在日常开发过程中总结提炼出的经验，规范具备较好的项目实践，强烈推荐使用</p>
        </section>
        
        <section id="font">
            <h2>字体设置</h2>
            <p>使用无衬线字体</p>
            <pre class="language-css"><code>body {
    font-family: "Helvetica Neue", Helvetica, STHeiTi, sans-serif;
}</code></pre>

            <p>iOS 4.0+ 使用英文字体 Helvetica Neue，之前的iOS版本降级使用 Helvetica。中文字体设置为华文黑体STHeiTi。
    需补充说明，华文黑体并不存在iOS的字体库中(<a href="http://support.apple.com/kb/HT5484?viewlocale=en_US" target="_blank">http://support.apple.com/kb/HT5484?viewlocale=en_US</a>)， 但系统会自动将华文黑体STHeiTi兼容命中系统默认中文字体黑体-简或黑体-繁</p>
        <pre class="prettyprint"><span class="typ">Heiti</span><span class="pln"> SC </span><span class="typ">Light</span><span class="pln"> </span><span class="pun">黑体-简</span><span class="pln"> </span><span class="pun">细体</span><span class="pln">
</span><span class="typ">Heiti</span><span class="pln"> SC </span><span class="typ">Medium</span><span class="pln"> </span><span class="pun">黑体-简</span><span class="pln"> </span><span class="pun">中黑</span><span class="pln">
</span><span class="typ">Heiti</span><span class="pln"> TC </span><span class="typ">Light</span><span class="pln"> </span><span class="pun">黑体-繁</span><span class="pln"> </span><span class="pun">细体</span><span class="pln">
</span><span class="typ">Heiti</span><span class="pln"> TC </span><span class="typ">Medium</span><span class="pln"> </span><span class="pun">黑体-繁</span><span class="pln"> </span><span class="pun">中黑</span></pre>

            <p>原生Android下中文字体与英文字体都选择默认的无衬线字体</p>
        <pre class="prettyprint"><span class="lit">4.0</span><span class="pln"> </span><span class="pun">之前版本英文字体原生</span><span class="pln"> </span><span class="typ">Android</span><span class="pln"> </span><span class="pun">使用的是</span><span class="pln"> </span><span class="typ">Droid</span><span class="pln"> </span><span class="typ">Sans</span><span class="pun">，中文字体原生</span><span class="pln"> </span><span class="typ">Android</span><span class="pln"> </span><span class="pun">会命中</span><span class="pln"> </span><span class="typ">Droid</span><span class="pln"> </span><span class="typ">Sans</span><span class="pln"> </span><span class="typ">Fallback</span><span class="pln">
</span><span class="lit">4.0</span><span class="pln"> </span><span class="pun">之后中英文字体都会使用原生</span><span class="pln"> </span><span class="typ">Android</span><span class="pln"> </span><span class="pun">新的</span><span class="pln"> </span><span class="typ">Roboto</span><span class="pln"> </span><span class="pun">字体</span><span class="pln">
</span><span class="pun">其他第三方</span><span class="pln"> </span><span class="typ">Android</span><span class="pln"> </span><span class="pun">系统也一致选择默认的无衬线字体</span></pre>
        </section>

    
        <section id="base_ui">
            <h2>基础交互</h2>
            <p>设置全局的CSS样式，避免图中的长按弹出菜单与选中文本的行为</p>
            <pre class="language-css"><code>a, img {
    -webkit-touch-callout: none; /* 禁止长按链接与图片弹出菜单 */
}
html, body {
    -webkit-user-select: none;   /* 禁止选中文本（如无文本选中需求，此为必选项） */
    user-select: none;
}</code></pre>

            <p style="text-align:center;">
            <img width="200px" src="./img/user-select.png">
            </p>
        </section>

        <section id="performance">
            <h2 id="performance">移动性能</h2>
            <h4>要考虑<code>Android</code>低端机与<code>2G</code>网络场景下性能 <sup><span class="label label-danger">注意！</span></sup></h4>
            <p>发布前必要检查项</p>
            <ul>
                <li>所有图片必须有进行过压缩</li>
                <li>考虑适度的有损压缩，如转化为80%质量的jpg图片</li>
                <li>考虑把大图切成多张小图，常见在banner图过大的场景</li>
            </ul>
            <p>加载性能优化, 达到打开足够快</p>
            <ul>
                <li>数据离线化，考虑将数据缓存在 localStorage</li>
                <li>初始请求资源数 <code>&lt; 4</code> <sup><span class="label label-danger">注意！</span></sup>
                <li>图片使用CSS Sprites 或 DATAURI</li>
                <li>外链 CSS 中避免 @import 引入</li>
                <li>考虑内嵌小型的静态资源内容</li>
                <li>初始请求资源gzip后总体积 <code>&lt; 50kb</code>
                <li>静态资源(HTML/CSS/JS/IMAGE)是否优化压缩？</li>
                <li>避免打包大型类库</li>
                <li>确保接入层已开启Gzip压缩</li>
                <li>尽量使用CSS3代替图片</li>
                <li>初始首屏之外的图片资源需延迟加载 <sup><span class="label label-danger">注意！</span></sup></li>
                <li>单页面应用(SPA)考虑延迟加载非首屏业务模块</li>
            </ul>
            <p>运行性能优化, 达到操作足够流畅</p>
            <ul>
                <li>避免 iOS 300+ms 点击延时问题 <sup><span class="label label-danger">注意！</span></sup></li>
                <li>缓存 DOM 选择与计算</li>
                <li>避免触发页面重绘的操作</li>
                <li>Debounce连续触发的事件(scroll/resize)，避免高频繁触发执行</li>
                <li>尽可能使用事件代理，避免批量绑定事件</li>
                <li>使用CSS3动画代替JS动画</li>
                <li>避免在低端机上使用大量CSS3渐变阴影效果，可考虑降级效果来提升流畅度</li>
                <li>HTML结构层级保持足够简单，推荐不超过 5 个层级</li>
                <li>尽能少的使用CSS高级选择器与通配选择器</li>
                <li>Keep it simple</li>
            </ul>

            <p>在线性能检测评定工具使用指南</p>
            <ul>
                <li>访问 <a href="http://developers.google.com/speed/pagespeed/insights/" target="_blank">Google PageSpeed</a> 在线评定网站</li>
                <li>在地址栏输入目标URL地址，点击分析按钮开始检测</li>
                <li>按 PageSpeed 分析出的建议进行优化，优先解决红色类别的问题</li>
            </ul>

            <p>推荐阅读</p>
            <ul>
                <li><a href="http://www.webperformancetoday.com/tag/mobile-web-performance/" target="_blank">移动WEB性能</a></li>
                <li><a href="https://developers.google.com/speed/docs/best-practices/caching" target="_blank">优化WEB缓存</a></li>
                <li><a href="https://developers.google.com/speed/docs/best-practices/rtt" target="_blank">最小化RTT次数</a></li>
                <li><a href="https://developers.google.com/speed/docs/best-practices/payload" target="_blank">最小化请求负载</a></li>
                <li><a href="https://developers.google.com/speed/docs/best-practices/rendering" target="_blank">优化浏览器渲染</a></li>
            </ul>
        </section>
        </div>
</section>

<script>
$(function(){
    // back to top
    setTimeout(function () {
      var $sideBar = $('.my_sidebar')

      $sideBar.affix({
        offset: {
          top: function () {
            var offsetTop      = $sideBar.offset().top
            var sideBarMargin  = parseInt($sideBar.children(0).css('margin-top'), 10)
            var navOuterHeight = $('#header').height()

            return (this.top = offsetTop - navOuterHeight - sideBarMargin)
          }
        , bottom: function () {
            return (this.bottom = $('.footer').outerHeight(true))
          }
        }
      })
    }, 100);

});
</script>
<script type="text/javascript" src="/Spirit/js/prism.js"></script>

  <!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">关于Spirit</h4>
      </div>
      <div class="modal-body">
        <p>Spirit（勇气号），美国航天局NASA派往Mars（火星）的第一艘探测器。</p>
        <p>移动Web开发是一块新的领域，甚至有很多坑，这一点与人类从未踏上的Mars（火星）相似。为了避免开发者重复遇到相同的问题，我们创建了Mars项目（<a target="_blank" href="https://github.com/AlloyTeam/Mars">view on Github</a>），收集与归纳移动Web开发中常见的问题。</p>
        <p>Spirit正是为了Mars而生，Mars项目中归纳的问题，会放到Spirit中解决，并沉淀到开发工具（JM与JMUI）以及开发规范中，真正建立移动Web开发的集成解决方案。</p>
        <p>如果你也在移动Web遇到了问题，请到<a target="_blank" href="https://github.com/AlloyTeam/Mars">Mars项目</a>提交Issue。<span class="glyphicon glyphicon-heart-empty"></span></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

  <div class="footer">
    <div class="container text-center">
        <p><a href="http://alloyteam.github.io/Spirit/MIT-LICENSE.txt">开源协议</a> | <a target="_blank" href="https://github.com/AlloyTeam/Spirit/issues/new">反馈意见</a></p>
        <p>© 2011-2014 <a target="_blank" href="http://www.alloyteam.com/">Tencent Alloyteam</a>. All Rights Reserved. Powered by <a target="_blank" href="http://zespia.tw/hexo/">Hexo</a></p>
    </div>
</div>

  <!--Tencent Analytics-->
<script type="text/javascript" src="http://tajs.qq.com/stats?sId=24711241" charset="UTF-8"></script>
<!--Google Analytics-->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23019343-9']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>